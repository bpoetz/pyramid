// Generated by CoffeeScript 1.6.1

  $(function() {
    var edit_page, get_page, replace_html;
    get_page = function(event) {
      var wikiword;
      wikiword = $(this).html();
      return $.get(wikiword).done(replace_html);
    };
    edit_page = function(event) {
      var wikiword;
      wikiword = $('#name').html();
      return $.ajax({
        type: 'POST',
        url: wikiword,
        data: {data: $('textarea').html(),
                },
        dataType: 'json',
      }).done(replace_html);
    };
    replace_html = function(data) {
      if (data.error != null) {
        $('#error').html(data.error);
        $('#data').html('This wiki does not exist.  Please create it.');
        $('#name').html(data.name);
        $('#wikiwords li').remove();
        $('#updated').html('')
      }
      if (data.page != null) {
        $('#name').html(data.page);
        $('#data').html(data.data);
        return $('#updated').html(data.updated);
      }
    };
    $('a.wikiword').on('click', get_page);
    return $('button').on('click', edit_page);
  });
